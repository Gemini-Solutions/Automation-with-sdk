
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
  <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>

  </script>
  <style>
      table{
          font-size:13px !important
      }
      .table-fit {
    width: 1px;
}
.filterHead{
   border-radius: 1rem;
}
.head{
    background-color:#375A64;
    color: white;
}
.statusColorPass{
    background-color:green !important;
    color: white !important;
}
.statusColorInfo{
    background-color:grey !important;
}
  </style>
  <body onload="constructTables()"> 
 
        <div class="container-fluid">
          <div class="mt-3 text-center">
              <div class="card" style="border: 1px groove black;">
         <h4 class="my-4"><b>GEMINI QA AUTOMATED TEST EXECUTION REPORT</b></h4>
         <h5 id="subheading" style="color: grey;"><b>
             <span id="subHead"></span>
             <span>(Automation Testing)</span>
             </b>
         </h5>
         <div class="d-flex flex-wrap justify-content-around" id="tableRow">
</div>
<div class="d-flex flex-wrap justify-content-evenly" id="filters">
</div>
<div class="d-flex flex-wrap justify-content-evenly" id="lowerTable">
</div>
          </div>
        </div>

        </body>
        <script>
var obj = '{"Header": "Gemini Report", "steps": [{"title": "Starting Test", "description": "Testcase Name: Test_functions_2", "status": "INFO"}, {"title": "Executing the REST Endpoint", "description": "<b>URL</b>: https://gorest.co.in/public/v2/$[#SUITE.user]</br><b>METHOD</b>: GET</br><b>REQUEST HEADERS</b>: {}", "status": "PASS"}, {"title": "Searching for pre API steps", "description": "No Pre API steps found", "status": "INFO"}, {"title": "Details of Request Execution", "description": "<b>RESPONSE CODE</b>: 404</br><b>RESPONSE HEADERS</b>: {'Server': 'nginx', 'Date': 'Wed, 22 Jun 2022 13:32:33 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Vary': 'Accept-Encoding, Origin', 'X-Frame-Options': 'SAMEORIGIN', 'X-XSS-Protection': '0', 'X-Content-Type-Options': 'nosniff', 'X-Download-Options': 'noopen', 'X-Permitted-Cross-Domain-Policies': 'none', 'Referrer-Policy': 'strict-origin-when-cross-origin', 'Link': '</assets/application-2715366c2372d5dfabfa9c9d05a0e84b9c0de17fe12c2d96e07d2db0e218fed2.css>; rel=preload; as=style; nopush', 'Cache-Control': 'no-cache', 'Feature-Policy': \"camera 'none'; gyroscope 'none'; microphone 'none'; usb 'none'; fullscreen 'self'\", 'Set-Cookie': '_gorest_session=xfJK04k3wO3UE0saFFIzZ%2FFADwaXXLoE0hT6MKBEZE3iOFBmDsoqQuO2ywZauFz0wOzm7UPz3VduPlH5i6XZ2RjwMueQ9BoCPtXZQe1nXx15qU4YZOE14Urz7dBapvpet%2FSO%2BkcFmqwbfZc4nBSvHSuu%2FyxcCSmZBCfxCrWe5RCbdjGygbUEnWoAGBFwCz3Fg6mUNxdpbGM7LivFQOpM76C8hKxK59PRdgY7TC4sH%2F9PoASVRhWabWRYuPwbXZ8LicG%2FYxk9fCiiXESUg00xtB7cunhZJaU%3D--dlxsort125Fk539%2F--q7xzFQ6XSFLyQq18pJ1Gkg%3D%3D; path=/; secure; HttpOnly; SameSite=Lax', 'X-Request-Id': 'f875343c-cf71-4840-9c48-cbdd5d4053ef', 'X-Runtime': '0.004806', 'Strict-Transport-Security': 'max-age=63072000; includeSubDomains', 'Content-Encoding': 'gzip'}</br><b>RESPONSE BODY</b>: <!DOCTYPE html><html><head><meta charset=\"utf-8\" /><meta content=\"width=device-width, initial-scale=1, shrink-to-fit=no\" name=\"viewport\" /><link href=\"/favicon.ico\" rel=\"icon\" type=\"image/x-icon\" /><title>Page Not Found | GO REST</title><meta name=\"csrf-param\" content=\"authenticity_token\" />\n<meta name=\"csrf-token\" content=\"ILSgxgvEIIlCahjurGZfJ9typm5JILXftZkInNcQbDWM7penRRZIiLHjD0EO6s0TxyC2P34pNiNa8uW2xbejNw\" /><link rel=\"stylesheet\" href=\"/assets/application-2715366c2372d5dfabfa9c9d05a0e84b9c0de17fe12c2d96e07d2db0e218fed2.css\" media=\"all\" data-turbolinks-track=\"reload\" /><script src=\"/packs/js/application-84cecc93f869802defaa.js\" data-turbolinks-track=\"reload\" defer=\"defer\"></script><script async=\"true\" crossorigin=\"anonymous\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4930099895671899\"></script><script async=\"true\" src=\"https://www.googletagmanager.com/gtag/js?id=G-7KR6VNWHWS\"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-7KR6VNWHWS');</script></head><body><nav class=\"navbar navbar-expand-lg navbar-dark bg-dark sticky-top\"><div class=\"container\"><a class=\"navbar-brand\" href=\"/\"><i class=\"fas fa-exchange-alt\"></i> Go REST</a><button aria-controls=\"AppNavBar\" aria-expanded=\"false\" aria-label=\"Toggle navigation\" class=\"navbar-toggler\" data-bs-target=\"#AppNavBar\" data-bs-toggle=\"collapse\" type=\"button\"><span class=\"navbar-toggler-icon\"></span></button><div class=\"collapse navbar-collapse\" id=\"AppNavBar\"><ul class=\"navbar-nav ms-auto\"><li class=\"nav-item\"><a class=\"nav-link\" href=\"/chandamama-stories\"><i class=\"fas fa-cloud-moon\"></i> Chandamama Stories</a></li><li class=\"nav-item\"><a class=\"nav-link\" href=\"/qa\"><i class=\"fas fa-life-ring\"></i> Help</a></li><li class=\"nav-item\"><a class=\"nav-link\" href=\"/rest-console\"><i class=\"fab fa-linux\"></i> Rest Console</a></li><li class=\"nav-item dropdown\"><a aria-expanded=\"false\" class=\"nav-link dropdown-toggle\" data-bs-toggle=\"dropdown\" href=\"#\" id=\"ToolsDropDown\" role=\"button\"><i class=\"fas fa-tools\"></i> Tools</a><ul aria-labelledby=\"ToolsDropDown\" class=\"dropdown-menu\"><li class=\"\"><a class=\"dropdown-item\" href=\"/tools/base64-encode-decode\">Base64 Encode/Decode</a></li><li class=\"\"><a class=\"dropdown-item\" href=\"/tools/url-encode-decode\">Url Encode/Decode</a></li><li class=\"\"><a class=\"dropdown-item\" href=\"/tools/gcode-translator\">G-Code Translator</a></li></ul></li><li class=\"nav-item\"><a class=\"nav-link\" href=\"/consumer/login\">Login</a></li></ul></div></div></nav><div class=\"container pt-3\"><style type=\"text/css\">.code-text code {color: #bdbdbd;display: block;}.code-text code b {color: #81a2be;font-weight: 900;}.code-text code em {color: #b294bb;font-style: unset;}.code-text code i {color: #b5bd68;}.code-text code span {color: #f0c674;}</style><div class=\"card text-white border-secondary bg-dark\"><div class=\"card-header\"><h1 class=\"card-title text-warning\"><i class=\"fas fa-ghost text-white slide-right\"></i> HTTP: Not Found </h1></div><div class=\"card-body\"><h3 class=\"leaad code-text\"><code class=\"mb-3\"><span>this_page</span>.<em>not_found</em> = true</code></h3><p class=\"lead code-text\"><code class=\"mb-2\"><span>if</span> <b>you_spelt_it_wrong</b> <br />&nbsp;&nbsp;<span>try_again</span><br /></code><code class=\"mb-2\"><span>elsif <b>we_screwed_up</b></span> <br />&nbsp;&nbsp;<em>print</em> <i>\"We're really sorry about that.\"</i><br/></code><code class=\"mb-2\"><span>end</span></code><code class=\"mb-2\"><span>redirect_to</span> <em>home_page</em></code></p></div></div></div><hr class=\"mt-5\" /><div class=\"container\"><div class=\"footer\"><ul class=\"list-inline\"><li class=\"list-inline-item\">&copy; Go Rest 2022</li><li class=\"list-inline-item float-lg-end\"><a href=\"/privacy-policy\">Privacy Policy</a></li><li class=\"list-inline-item float-lg-end me-3\"><a href=\"/contact-us\">Contact Us</a></li></ul></div></div></body></html>", "status": "INFO"}, {"title": "Validating Response Code", "description": "<b>Expected RESPONSE CODE</b>: [200]</br><b>ACTUAL RESPONSE CODE</b>: 404", "status": "FAIL"}], "metaData": [{"TESTCASE NAME": "Test_functions_2", "SERVICE PROJECT": "GEMPYP_TEST", "DATE OF EXECUTION": {"value": 1655904924231.995, "type": "date"}}, {"EXECUTION STARTED ON": {"value": 1655904924231.995, "type": "datetime"}, "EXECUTION ENDED ON": {"value": 1655904924529.567, "type": "datetime"}, "EXECUTION DURATION": "0.298 seconds"}, {"FAIL": 1, "PASS": 1, "INFO": 3}], "FilterNames": {"status": "Dropdown", "title": "Input", "description": "Input"}, "FilterValues": {"status": ["FAIL", "PASS", "INFO"]}}';
obj = JSON.parse(obj)
console.log(obj)
document.getElementById("subHead").innerText=obj.Header;
function constructTables(){
for(var i=0;i<obj.metaData.length;i++){
    var div=$('<div/>').addClass('col-sm-4 col-md-4 col-lg-4 mt-4');
  var tables=  constructTable(obj.metaData[i]).addClass('table table-bordered table-hover');
  div.append(tables);
    $("#tableRow").append(div);
}
// var FilterTable=$('<table/>');
 var rows=createFilters(obj.FilterNames);
//  FilterTable.append(rows).addClass('table-borderless table-sm').css('size','8px');
 var divFiter=$('<div/>').addClass('col-sm-12 col-md-12 col-lg-12 mt-4 mainFilt');
 divFiter.append(rows);
$("#filters").append(divFiter);


 var mainTable=createLowerTable(obj.steps);
 var divLower=$('<div/>').addClass('col-sm-12 col-md-12 col-lg-12 mt-4 main');
 divLower.append(mainTable);
 $("#lowerTable").append(divLower);
}

function createLowerTable(list){
var cols = [];
             
            for (var i = 0; i < list.length; i++) {
                for (var k in list[i]) {
                    if (cols.indexOf(k) === -1) {
                         
                        // Push all keys to the array
                        cols.push(k);
                    }
                }
            }
            // var table=$('<table/>');
            // var row = $(table[0].insertRow(-1));
            // for (var i = 0; i < cols.length; i++) {
                 
            //     // Create the table header th element
            //     var headerCell = $("<th />");
            // headerCell.html(customers[0][i]);
            // row.append(headerCell);
            // }



            // Create a table element
            var table = document.createElement("table");
            table.id="tab"
             table.className="table table-bordered table-hover text-center";
            // Create table row tr element of a table
            var tr = table.insertRow(-1);
             
            for (var i = 0; i < cols.length; i++) {
                 
                // Create the table header th element
                var theader = document.createElement("th");
                theader.className="head";
                theader.innerHTML = cols[i];
                 
                // Append columnName to the table row
                tr.appendChild(theader);
            }
             
            // Adding the data to the table
            for (var i = 0; i < list.length; i++) {
                 
                // Create a new row
                trow = table.insertRow(-1);
                for (var j = 0; j < cols.length; j++) {
                    var cell = trow.insertCell(-1);
                     var att = document.createAttribute("data-input");
                     if(cols[j].includes(" ")){
                         var v=cols[j].replace(" ","_");
                 att.value = v;
               }else{
                     att.value = cols[j];
               }
                     cell.setAttributeNode(att);

                    if(typeof(list[i][cols[j]])==='object'){
                        var a=document.createElement("a");
                        a.href=list[i][cols[j]]['href'];
                        a.target="_blank";
                        a.innerHTML=list[i][cols[j]]['LinkName'];
                        cell.appendChild(a);
                    } else if(cols[j]==='STATUS'){
                        cell.innerHTML = list[i][cols[j]];
                        if(list[i][cols[j]]==='PASS'){
                        cell.className="statusColorPass";
                        }
                        else{
                            cell.className="statusColorInfo";
                        }
                    }
                    else if(cols[j]==='TIME'){
                            cell.innerHTML =convertIntoDateTime(list[i][cols[j]]);
                        }
                    else{
                    cell.innerHTML = list[i][cols[j]];
                    }
                }
            }
             
return table;
}
function createFilters(value){

    var cols = Headers(value); 
var checkLength=cols.length;
var FilterTable=$('<table/>').css('border-collapse', 'separate').css('border-spacing','0px 10px');
var row = $('<tr/>').css('word-wrap','normal');
    for (var i=0;i<cols.length;i++){
           var val = value[cols[i]];
           if (val == null) val = ""; 
            row.append($('<th/>').html(cols[i]).addClass('filterHead text-center py-2').css('color','white').css('background-color','#375A64').css('min-width','90px')); 
            if(val==='Input'){
                var input = $('<input>').attr('size',20).attr('type','text').attr('value','').addClass('form-control search-key');
               if(cols[i].includes(" ")){
                 cols[i]=  cols[i].replace(" ","_");
                
               }
                input.attr('id',cols[i]);
            row.append($('<td/>').append(input).addClass('form-control input'));
            }else if(val=='Dropdown'){
                var Dropdown = $('<select/>').addClass('custom-select search-key').css('width','100%').css('color','black !important');
                Dropdown.attr('id',cols[i]);
                var options=obj.FilterValues[cols[i]]
                for(var j=0;j<options.length;j++){
                    Dropdown.append($('<option>',{text:options[j]}).attr('value',options[j]).addClass('form-control'));
                }
                row.append($('<td/>').append(Dropdown));
            }
              if((i+1)%4==0 && i!=0){
                
                  FilterTable.append(row);
                 var row = $('<tr/>').css('word-wrap','normal');

              }
       }
       
    
    //    var searchButton=$('<button/>').addClass('btn btn-secondary btn-sm').html('Filter');
 var clearButton=$('<button/>').addClass('btn btn-secondary btn-sm').html('Clear Filter');
 clearButton.attr('id','clear');
 $(document).ready(function(){
 clearButton.click(function(){
     myFunction();
 });
});
//  row.append($('<td/>').append(searchButton));
 row.append($('<td/>').append(clearButton));
     
FilterTable.append(row).addClass('table-borderless table-sm');
return FilterTable;
    }

function constructTable(value) {
var cols = Headers(value); 
         var rows=$('<table>');
       for (var colIndex = 0; colIndex < cols.length; colIndex++)
       {
        var row = $('<tr>');
           var val = value[cols[colIndex]];
           if (val == null) val = ""; 
            row.append($('<th/>').html(cols[colIndex]).css('color','white').css('background-color','#375A64')); 
            if(typeof(val)==='object'){
                row.append($('<td/>').html(changeDate(val)));
            }else{
            row.append($('<td/>').html(val));
            }
               $(rows).append(row);
       }
     return rows;    
     
    
}
   function Headers(list) {
            var columns = [];
           row=list
                for (var k in row) {
                    if ($.inArray(k, columns) == -1) {
                        columns.push(k);
                    }
                }
                return columns;
        }    
        function convertIntoDateTime(value){
 var date = new Date(value);
 return date.toLocaleString();
        }   
        var eventList = ["change", "load"];
        for(event of eventList){
        window.addEventListener(event, function () {
            var $filterableRows = $('#tab').find('tbody').find('tr').not(':first'),
		$inputs = $('.search-key');

$inputs.live('input', function() {

	$filterableRows.hide().filter(function() {
  	return $(this).find('td').filter(function() {
      var tdText = $(this).text().toLowerCase(),
      		inputValue = $('#' + $(this).data('input')).val();
              if(inputValue ==='All'){
                  inputValue ="";
              }
              if(inputValue===undefined){
                  inputValue ="";
              }
              else{
                  inputValue = inputValue.toLowerCase();
              }
    	return tdText.indexOf(inputValue) != -1;
    
    }).length == $(this).find('td').length;
  }).show();

});
        });
    }
function myFunction(){
   var inputs=$('.search-key');
   for(var i=0;i<inputs.length;i++){
       inputs[i];
       if(inputs[i].id==='STATUS'){
           inputs[i].value='All';
       }else{
       inputs[i].value='';
       }
   }


    var $filterableRows = $('#tab tbody tr');
   $filterableRows.show()
}
function changeDate(val){
    console.log(val);
    var temp=val.type.toLowerCase();
    var d= new Date(val.value);
    if(temp==='date'){
        
        return d.toLocaleDateString();
    }else if(temp==='time'){
        return d.toLocaleTimeString();
    }else if(temp==='datetime'){
return d.toLocaleString();
    }
}
 </script>

</html>